<!DOCTYPE html>
<html lang="en">
<head>
<meta name="apple-mobile-web-app-title" content="U Hub Pro">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" href="icons/icon-192x192.png">
<link rel="apple-touch-icon" sizes="180x180" href="icons/icon-180x180.png">
<link rel="apple-touch-icon" sizes="512x512" href="icons/icon-512x512.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>U Hub Pro - Product Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
    <script src="Firebasenameandlogout.js"></script>
</head>
<style>



/* Remove all horizontal scrolling */
html, body {
    margin: 0;
    padding: 0;
    overflow-x: hidden;
}

/* Prevent any flex overflow from main-content */
.main-content {
    max-width: 100vw;
    box-sizing: border-box;
}


/* Optional: make sure sidebar doesnt push layout */
    .sidebar {
        max-width: 80px;
        overflow-x: hidden;
    }

@media (max-width: 600px) {
    .content {
        margin-top: 60px;
        padding-bottom: 8.5rem;
        width: 300px;
    }
    .price-type-label {
        display: none;
    }
    select {
        margin-left: 5px;
    }
    
}

.product-controls {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
}
.product-quantity {
    order: 1; /* Moves quantity to bottom */
}
.remove-btn {
    order: 2; /* Moves button to top */
    padding: 0 4px;
}




</style>
<body>



<!-- Topbar Icons -->
<div class="topbar">
<a href="dashboard.html" title="BC Tracker"><i class="fas fa-sitemap"></i></a>
<a href="productcomputer.html" class="active" title="Product Calculator"><i class="fas fa-calculator"></i></a>
<a href="blueguide.html" title="The Blue Guide"><i class="fas fa-stethoscope"></i></a>
<a href="product_inv.html" title="Inventory Tool"><i class="fas fa-chart-line"></i></a>
<!-- Logout Button in Sidebar -->
<a id="topbarLogoutBtn" class="sidebar-logout" title="Logout">
<i class="fas fa-sign-out-alt"></i>
</a>

</div>
<div class="header">
<div class="logo">
<span style="margin-left: 0px;">Calculator</span>


</div>


</div>
    
    <div class="dashboard">
    
    <!-- Sidebar -->
    <div class="sidebar">
    <a href="dashboard.html" title="BC Tracker"><i class="fas fa-sitemap"></i></a>
    <a href="productcomputer.html" class="active" title="Product Calculator"><i class="fas fa-calculator"></i></a>
    <a href="blueguide.html" title="The Blue Guide"><i class="fas fa-stethoscope"></i></a>
    <a href="product_inv.html" title="Inventory Tool"><i class="fas fa-chart-line"></i></a>
    <!-- Logout Button in Sidebar -->
    <a id="sidebarLogoutBtn" class="sidebar-logout" title="Logout">
    <i class="fas fa-sign-out-alt"></i>
    </a>
    </div>
    
    <!-- Content -->
    <div class="content">
        
        <!-- Header with ID instead of class -->
        <header id="mainHeader">
        <p id="greeting" class="greeting-text">Hi, User</p>
        </header>
        
        
        <div class="controls">
        <div>
        <button onclick="setCategory('supplements')">
        <span class="full-text">Nutritionals</span>
        <span class="short-text">N</span>
        </button>
        <button onclick="setCategory('skincare')">
        <span class="full-text">Celavive</span>
        <span class="short-text">C</span>
        </button>
        </div>
        
        <div class="controls-right-group">
        <label>
        <span class="price-type-label">Price Type:</span>
        <select id="priceType" onchange="renderProducts()">
        <option value="member">Member</option>
        <option value="srp">SRP</option>
        <option value="ao">AO</option>
        </select>
        </label>
        <div>
        <button id="sortButton" onclick="toggleSort()" style="padding: 5px 10px; background: #e0e0e0; border-radius: 4px; width:65px;">
        <i class="fas fa-random"></i>
        </button>
        </div>
        </div>
        </div>        
        
        <div class="product-grid" id="productGrid"></div>
        
        <div class="total-bar">
        <div class="total-info">
        <span class="total-label">Total: â‚±<span id="totalAmount">0</span></span>
        <span class="svp-label">SVP: <span id="svpAmount">0</span></span>
        </div>
        <div class="button-container">
        <button class="btn-clear" onclick="clearAll()">Clear</button>
        <button class="btn-clear copy-summary" onclick="copySummary()">Copy Summary</button>
        </div>
        </div>
        
        
        
    </div>
    
    
    
    </div>



<script>

        let currentSortMode = 0; // 0 = A-Z, 1 = Price High-Low, 2 = SVP High-Low
        
        function toggleSort() {
            currentSortMode = (currentSortMode + 1) % 3;
            renderProducts();
            updateSortButtonText();
        }
        
        function updateSortButtonText() {
            const sortButton = document.getElementById('sortButton');
            const icons = [];
            const texts = ['A-Z', 'PHP â†“', 'SVP â†“'];
            
            // Remove all icon classes and add the current one
            sortButton.querySelector('i').className = 'fas ' + icons[currentSortMode];
            sortButton.innerHTML = `<i class="fas ${icons[currentSortMode]}"></i> ${texts[currentSortMode]}`;
        }
        
        function sortProducts(productList) {
            const productsArray = Object.entries(productList);
            
            switch(currentSortMode) {
                case 1: // Price High-Low
                    return productsArray.sort((a, b) => b[1][selectedPrice] - a[1][selectedPrice]);
        case 2: // SVP High-Low
            return productsArray.sort((a, b) => b[1].svp - a[1].svp);
        default: // A-Z
            return productsArray.sort((a, b) => a[0].localeCompare(b[0]));
                    }
                    }


const products = {
    supplements: {
        "Active+": { member: 1850, srp: 2220, ao: 1665, svp: 15, unitCount: 84, unitType: "tablets" },
        "Advanced Collagen": { member: 2000, srp: 2400, ao: 1800, svp: 12, unitCount: 14, unitType: "servings" },
        "BiOmega": { member: 2100, srp: 2520, ao: 1890, svp: 14, unitCount: 56, unitType: "gelcaps" },
        "Calm Response Balm": { member: 1200, srp: 1440, ao: 1080, svp: 10, unitCount: 1, unitType: "tube" },
        "Cellsentials": { member: 3490, srp: 4190, ao: 3141, svp: 34, unitCount: 224, unitType: "tablets" },
        "CoQuinone30": { member: 3250, srp: 3900, ao: 2925, svp: 32, unitCount: 56, unitType: "gelcaps" },
        "CopaPrime+": { member: 2450, srp: 2940, ao: 2205, svp: 20, unitCount: 56, unitType: "tablets" },
        "Digestive Enzyme": { member: 1600, srp: 1920, ao: 1440, svp: 14, unitCount: 56, unitType: "tablets" },
        "Electrolyte Replacement Drink": { member: 2200, srp: 2640, ao: 1980, svp: 10, unitCount: 28, unitType: "packets" },
        "Fibergy Active": { member: 1750, srp: 2100, ao: 1575, svp: 14, unitCount: 28, unitType: "servings" },
        "Hepasil DTX": { member: 2800, srp: 3360, ao: 2520, svp: 24, unitCount: 84, unitType: "tablets" },
        "Magnecal D": { member: 1850, srp: 2220, ao: 1665, svp: 15, unitCount: 112, unitType: "tablets" },
        "Mini Cellsentials": { member: 1050, srp: 1260, ao: 945, svp: 7, unitCount: 28, unitType: "tablets" },
        "Nutrimeal Choco": { member: 1850, srp: 2220, ao: 1665, svp: 12, unitCount: 9, unitType: "servings" },
        "Nutrimeal Vanilla": { member: 1850, srp: 2220, ao: 1665, svp: 12, unitCount: 9, unitType: "servings" },
        "Nutrimeal Strawberry": { member: 1850, srp: 2220, ao: 1665, svp: 12, unitCount: 9, unitType: "servings" },
        "Palmetto Plus": { member: 2600, srp: 3120, ao: 2340, svp: 17, unitCount: 30, unitType: "gelcaps" },
        "Poly C": { member: 1500, srp: 1800, ao: 1350, svp: 10, unitCount: 120, unitType: "tablets" },
        "Procalm+": { member: 1600, srp: 1920, ao: 1440, svp: 12, unitCount: 56, unitType: "tablets" },
        "Procosa": { member: 2450, srp: 2940, ao: 2205, svp: 19, unitCount: 84, unitType: "tablets" },
        "Proflavanol C100": { member: 2900, srp: 3480, ao: 2610, svp: 30, unitCount: 56, unitType: "tablets" },
        "Proglucamune": { member: 2100, srp: 2520, ao: 1890, svp: 15, unitCount: 56, unitType: "tablets" },
        "Pure Rest": { member: 1100, srp: 1320, ao: 990, svp: 8, unitCount: 56, unitType: "tablets" },
        "USANA DTX Tea Mix": { member: 1450, srp: 1740, ao: 1305, svp: 8, unitCount: 28, unitType: "packets" },
        "USANA Probiotic": { member: 1600, srp: 1920, ao: 1440, svp: 10, unitCount: 14, unitType: "packets" },
        "Usanimals": { member: 1300, srp: 1560, ao: 1170, svp: 8, unitCount: 56, unitType: "tablets" },
        "Visionex": { member: 2600, srp: 3120, ao: 2340, svp: 25, unitCount: 56, unitType: "tablets" },
        "Whitening Toothpaste": { member: 450, srp: 540, ao: 405, svp: 3, unitCount: 1, unitType: "tube" }    },
    skincare: {
        "Creamy Foam Cleanser": { member: 1800, srp: 2160, ao: 1800, svp: 14, unitCount: 70, unitType: "application" },
        "Daily Mineral Protective Cream": { member: 1800, srp: 2160, ao: 1800, svp: 16, unitCount: 70, unitType: "application" },
        "Dark Spot Corrector": { member: 1600, srp: 1920, ao: 1600, svp: 0, unitCount: 70, unitType: "application" },
        "Exfoliating Scrub + Mask": { member: 1500, srp: 1800, ao: 1500, svp: 10, unitCount: 40, unitType: "application" },
        "Gentle Milk Cleanser": { member: 1800, srp: 2160, ao: 1800, svp: 14, unitCount: 70, unitType: "application" },
        "Hydrating Eye Essence": { member: 2800, srp: 3360, ao: 2800, svp: 22, unitCount: 70, unitType: "application" },
        "Hydrating Sheet Mask": { member: 1200, srp: 1440, ao: 1200, svp: 9, unitCount: 3, unitType: "sheets" },
        "Light Complexion Serum": { member: 2500, srp: 3000, ao: 2500, svp: 25, unitCount: 70, unitType: "application" },
        "Luminous Moisture Cream": { member: 2200, srp: 2640, ao: 2200, svp: 22, unitCount: 40, unitType: "application" },
        "Protective Day Cream": { member: 1900, srp: 2280, ao: 1900, svp: 16, unitCount: 70, unitType: "application" },
        "Protective Day Lotion": { member: 1900, srp: 2280, ao: 1900, svp: 16, unitCount: 70, unitType: "application" },

        "Perfecting Toner": { member: 1850, srp: 2220, ao: 1850, svp: 14, unitCount: 70, unitType: "application" },
        "Vitalizing Serum": { member: 2800, srp: 3360, ao: 2800, svp: 22, unitCount: 70, unitType: "application" },
        "Replenishing Night Cream": { member: 1900, srp: 2280, ao: 1900, svp: 16, unitCount: 70, unitType: "application" },
        "Replenishing Night Gel": { member: 1900, srp: 2280, ao: 1900, svp: 16, unitCount: 70, unitType: "application" },
        "Resurfacing 4-in-1 Serum": { member: 5500, srp: 6600, ao: 5500, svp: 60, unitCount: 70, unitType: "application" }

    }
};

let selectedCategory = 'supplements';
let selectedPrice = 'member';
const cart = {};

function setCategory(cat) {
    selectedCategory = cat;
    renderProducts();
}

function addToCart(name) {
    if (!cart[name]) cart[name] = 0;
        cart[name]++;
        renderProducts();
        updateTotal();
        }
        
        function removeFromCart(name) {
            if (cart[name]) {
                cart[name]--;
                if (cart[name] <= 0) delete cart[name];
                    renderProducts();
                    updateTotal();
                    }
                    }
                    
                    function clearAll() {
                        for (let item in cart) cart[item] = 0;
                            updateTotal();
                            renderProducts();
                            }
                            
                            function renderProducts() {
                                selectedPrice = document.getElementById("priceType").value;
                                const grid = document.getElementById("productGrid");
                                grid.innerHTML = "";
                                const list = products[selectedCategory];
                                
                                // Get sorted products
                                const sortedProducts = sortProducts(list);
                                
                                // Render sorted products
                                sortedProducts.forEach(([name, product]) => {
        const qty = cart[name] || 0;
        const div = document.createElement("div");
        div.className = "product";
        
        div.innerHTML = `
            <div style="display: flex; justify-content: space-between; width: 100%;">
                <div style="flex: 1; min-width: 0; padding-right: 10px;">
                    <div class="product-name" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                        ${name}
                    </div>
                    <div class="product-unit-price" style="font-size: 0.8em; color: #666; text-align: left;">
    (â‚±${Math.round(product[selectedPrice]/product.unitCount)} per ${product.unitType})
</div>
</div>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <div style="text-align: right;">
                        <div class="product-price" style="font-weight: 600;">â‚±${product[selectedPrice]}</div>
                        <div class="product-svp" style="color: #666; font-size: 0.9em;">SVP: ${product.svp}</div>
                    </div>
                    ${qty > 0 ? `
                    <div class="product-controls" style="display: flex; flex-direction: column; align-items: center; min-width: 30px;">
                        <button class="remove-btn" onclick="event.stopPropagation(); removeFromCart('${name}')">-</button>
                        <div class="product-quantity">${qty}</div>
                    </div>
                    ` : ''}
                </div>
            </div>
        `;
        
        div.onclick = () => addToCart(name);
        grid.appendChild(div);
    });
    
    updateTotal();
}

                            
                            function updateTotal() {
                                let total = 0;
                                let svpTotal = 0;
                                for (let name in cart) {
                                    const product = products.supplements[name] || products.skincare[name];
                                    total += product[selectedPrice] * cart[name];
                                    svpTotal += product.svp * cart[name];
                                }
                                    document.getElementById("totalAmount").innerText = total.toLocaleString();
                                    document.getElementById("svpAmount").innerText = svpTotal;
                                    }
                                    
                                    function copySummary() {
    // Header
    let text = `ðŸ›’ Order Summary\n`;
    text += `ðŸ“… ${new Date().toLocaleDateString()}\n`;
    text += `ðŸ’° ${document.getElementById('priceType').value.toUpperCase()} Price\n\n`;
    
    // Products
    let total = 0;
    let svpTotal = 0;
    
    for (let name in cart) {
        const product = products.supplements[name] || products.skincare[name];
        const qty = cart[name];
        if (qty > 0) {
            const itemTotal = product[selectedPrice] * qty;
            text += `âž¤ ${name}\n`;
            text += `   ${qty} Ã— â‚±${product[selectedPrice].toLocaleString()} = â‚±${itemTotal.toLocaleString()}\n`;
            text += `   (${product.svp * qty} SVP)\n\n`;
            total += itemTotal;
            svpTotal += product.svp * qty;
        }
    }
    
    // Footer
    text += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n`;
    text += `Subtotal: â‚±${total.toLocaleString()}\n`;
    text += `Total SVP: ${svpTotal}\n`;
    text += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n`;
    text += `TOTAL: â‚±${total.toLocaleString()}`;
    
    navigator.clipboard.writeText(text).then(() => {
        alert("Messenger-ready summary copied!");
    });
}        
        
        // Initialize the sort button text
updateSortButtonText();
renderProducts();
        renderProducts();




    </script>
    </body>
</html>
                    